{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\S556370\\\\Desktop\\\\Final Project\\\\project\\\\src\\\\components\\\\Attachments.js\",\n  _s = $RefreshSig$();\nimport { useRef, useState, useEffect } from \"react\";\nimport { IconButton, Typography } from \"@mui/material\";\nimport styled from \"styled-components\";\nimport FileUploadIcon from \"@mui/icons-material/FileUpload\";\nimport { Trash } from \"@phosphor-icons/react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AttachmentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n`;\n_c = AttachmentContainer;\nconst AttachmentBox = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  gap: 0.5rem;\n  border: 1px dashed gray;\n  border-radius: 10px;\n`;\n_c2 = AttachmentBox;\nexport default function Attachments({\n  title = \"\",\n  onAttachment = () => {},\n  multiple = true\n}) {\n  _s();\n  const [files, setFiles] = useState([]);\n  const fileInputRef = useRef(null);\n  useEffect(() => {\n    onAttachment(files.map(item => item.base64));\n  }, [files]);\n  const removeBase64Metadata = base64String => {\n    // Find the index of the comma in the base64 string\n    const commaIndex = base64String.indexOf(\",\");\n\n    // Extract and return the base64 data without metadata\n    return base64String.slice(commaIndex + 1);\n  };\n  const handleDrop = e => {\n    e.preventDefault();\n    const newFiles = [];\n    const dataFiles = e.target.files || e.dataTransfer.files;\n    for (let x in dataFiles) {\n      const file = dataFiles[x];\n      if (!multiple && x >= 1) {\n        return;\n      }\n      if (file.type === \"image/png\") {\n        const reader = new FileReader();\n        reader.onload = event => {\n          newFiles.push({\n            name: file.name,\n            id: file.name + new Date().getTime(),\n            base64: removeBase64Metadata(event.target.result)\n          });\n          setFiles([...files, ...newFiles]);\n        };\n        reader.readAsDataURL(file);\n      }\n    }\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n  };\n  const handleDelete = id => {\n    const updatedFiles = files.filter(file => file.id !== id);\n    setFiles(updatedFiles);\n  };\n  const handleBoxClick = () => {\n    fileInputRef.current.click();\n  };\n  return /*#__PURE__*/_jsxDEV(AttachmentContainer, {\n    onDrop: handleDrop,\n    onDragOver: handleDragOver,\n    children: [title && /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"subtitle1\",\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(AttachmentBox, {\n      onClick: handleBoxClick,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        onChange: handleDrop,\n        accept: \".png\",\n        multiple: multiple,\n        style: {\n          display: \"none\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FileUploadIcon, {\n        fontSize: \"large\",\n        color: \"info\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"caption\",\n        children: \"Click or Drag and Drop files to upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: \"1rem\"\n      },\n      children: files.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: \"10px\",\n          position: \"relative\",\n          width: \"100px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => handleDelete(file.id),\n          size: \"small\",\n          style: {\n            position: \"absolute\",\n            right: \"0\",\n            backgroundColor: \"white\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Trash, {\n            color: \"red\",\n            fontSize: 15\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `data:image/png;base64,${file.base64}`,\n          alt: file.name,\n          style: {\n            width: \"100px\",\n            maxHeight: \"100px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this)]\n      }, file.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(Attachments, \"XsoYxH/1qvyWXmZatjTKWvmLut4=\");\n_c3 = Attachments;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"AttachmentContainer\");\n$RefreshReg$(_c2, \"AttachmentBox\");\n$RefreshReg$(_c3, \"Attachments\");","map":{"version":3,"names":["useRef","useState","useEffect","IconButton","Typography","styled","FileUploadIcon","Trash","jsxDEV","_jsxDEV","AttachmentContainer","div","_c","AttachmentBox","_c2","Attachments","title","onAttachment","multiple","_s","files","setFiles","fileInputRef","map","item","base64","removeBase64Metadata","base64String","commaIndex","indexOf","slice","handleDrop","e","preventDefault","newFiles","dataFiles","target","dataTransfer","x","file","type","reader","FileReader","onload","event","push","name","id","Date","getTime","result","readAsDataURL","handleDragOver","handleDelete","updatedFiles","filter","handleBoxClick","current","click","onDrop","onDragOver","children","variant","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","onChange","accept","style","display","fontSize","color","gap","margin","position","width","size","right","backgroundColor","src","alt","maxHeight","_c3","$RefreshReg$"],"sources":["C:/Users/S556370/Desktop/Final Project/project/src/components/Attachments.js"],"sourcesContent":["import { useRef, useState, useEffect } from \"react\";\r\nimport { IconButton, Typography } from \"@mui/material\";\r\nimport styled from \"styled-components\";\r\nimport FileUploadIcon from \"@mui/icons-material/FileUpload\";\r\nimport { Trash } from \"@phosphor-icons/react\";\r\n\r\nconst AttachmentContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n`;\r\n\r\nconst AttachmentBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 2rem;\r\n  gap: 0.5rem;\r\n  border: 1px dashed gray;\r\n  border-radius: 10px;\r\n`;\r\n\r\nexport default function Attachments({\r\n  title = \"\",\r\n  onAttachment = () => {},\r\n  multiple = true,\r\n}) {\r\n  const [files, setFiles] = useState([]);\r\n  const fileInputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    onAttachment(files.map((item) => item.base64));\r\n  }, [files]);\r\n\r\n  const removeBase64Metadata = (base64String) => {\r\n    // Find the index of the comma in the base64 string\r\n    const commaIndex = base64String.indexOf(\",\");\r\n\r\n    // Extract and return the base64 data without metadata\r\n    return base64String.slice(commaIndex + 1);\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    const newFiles = [];\r\n    const dataFiles = e.target.files || e.dataTransfer.files;\r\n    for (let x in dataFiles) {\r\n      const file = dataFiles[x];\r\n      if (!multiple && x >= 1) {\r\n        return;\r\n      }\r\n      if (file.type === \"image/png\") {\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n          newFiles.push({\r\n            name: file.name,\r\n            id: file.name + new Date().getTime(),\r\n            base64: removeBase64Metadata(event.target.result),\r\n          });\r\n          setFiles([...files, ...newFiles]);\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handleDelete = (id) => {\r\n    const updatedFiles = files.filter((file) => file.id !== id);\r\n    setFiles(updatedFiles);\r\n  };\r\n\r\n  const handleBoxClick = () => {\r\n    fileInputRef.current.click();\r\n  };\r\n\r\n  return (\r\n    <AttachmentContainer onDrop={handleDrop} onDragOver={handleDragOver}>\r\n      {title && <Typography variant=\"subtitle1\">{title}</Typography>}\r\n      <AttachmentBox onClick={handleBoxClick}>\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          onChange={handleDrop}\r\n          accept=\".png\"\r\n          multiple={multiple}\r\n          style={{ display: \"none\" }}\r\n        />\r\n        <FileUploadIcon fontSize=\"large\" color=\"info\" />\r\n        <Typography variant=\"caption\">\r\n          Click or Drag and Drop files to upload\r\n        </Typography>\r\n      </AttachmentBox>\r\n      <div style={{ display: \"flex\", gap: \"1rem\" }}>\r\n        {files.map((file) => (\r\n          <div\r\n            key={file.id}\r\n            style={{ margin: \"10px\", position: \"relative\", width: \"100px\" }}\r\n          >\r\n            <IconButton\r\n              onClick={() => handleDelete(file.id)}\r\n              size=\"small\"\r\n              style={{\r\n                position: \"absolute\",\r\n                right: \"0\",\r\n                backgroundColor: \"white\",\r\n              }}\r\n            >\r\n              <Trash color=\"red\" fontSize={15} />\r\n            </IconButton>\r\n            <img\r\n              src={`data:image/png;base64,${file.base64}`}\r\n              alt={file.name}\r\n              style={{ width: \"100px\", maxHeight: \"100px\" }}\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </AttachmentContainer>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}